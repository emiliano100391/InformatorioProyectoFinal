{% extends 'base.html' %}

{% block contenido %}

<section class="row">
  <aside class="col-3 position-absolute end-0 border border-secondary">
    <h3>Categorias:</h3>
    <ul class="list-group">
      {% for categoria in categorias %}
      <li class="list-group-item"><a class="text-decoration-none"
          href="{% url 'publicaciones:home' %}?categoria={{categoria.id}} ">{{categoria.nombre_categoria}}</a>
      </li>
      {% endfor %}
    </ul>
    <h3>Ordenar por:</h3>
    <div class="m-2">
      <a class="ms-3 btn btn-success" href="{% url 'publicaciones:home' %}?orden=asc">Mas recientes</a>
    </div>
    <div class="m-2">
      <a class="ms-3 btn btn-success" href="{% url 'publicaciones:home' %}?orden=desc">Mas antiguos</a>
    </div>
    <div class="m-2">
      <a href="{% url 'publicaciones:home' %}?alfabeticamente=a-z" class="ms-3 btn btn-secondary">Por titulo ascendente</a>
    </div>
    <div class="m-2">
      <a href="{% url 'publicaciones:home' %}?alfabeticamente=z-a" class="ms-3 btn btn-secondary">Por titulo descendente</a>
    </div>
  </aside>
  
{% if categoria in categorias %}
  <h2>Publicaciones en la categoria: {{categoria.nombre_categoria}}</h2>
  {% for publicacion in publicaciones %}
  <div class="card m-2" style="width: 18rem;">
    {% if p.imagen_public %}
    <img src="{{ p.imagen_public.url }}" name="imagen_public" alt="Imagen" style="width: 100%; height: 50%" class="card-img-top">
    {% else %}
    <p>No hay imagen</p>
    {% endif %}
    <div class="card-body">
      <h5 class="card-title">{{p.titulo_public}}</h5>
      <p class="card-text">{{p.autor_public}}</p>
      <p class="card-text">{{p.resumen_public}}</p>
      <a href="{% url 'publicaciones:publicacion_detalle' p.id %}" class="btn btn-primary">ver mas</a>
    </div>
  </div>
  {% endfor %}

{% else %}
  <h2>Publicaciones:</h2>
  {% for p in lista_publicaciones %}
  <div class="card m-2" style="width: 18rem;">
    {% if p.imagen_public %}
    <img src="{{ p.imagen_public.url }}" name="imagen_public" alt="Imagen" style="width: 100%; height: 50%" class="card-img-top">
    {% else %}
    <p>No hay imagen</p>
    {% endif %}
    <div class="card-body">
      <h5 class="card-title">{{p.titulo_public}}</h5>
      <p class="card-text">{{p.autor_public}}</p>
      <p class="card-text">{{p.resumen_public}}</p>
      <a href="{% url 'publicaciones:publicacion_detalle' p.id %}" class="btn btn-primary">ver mas</a>
    </div>
  </div>
  {% endfor %}

{% endif %}
</section>

{% endblock contenido %}